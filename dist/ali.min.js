/*!
 * --------------------------------------------------------------------------
 * Ali - Accessible Learning Interactions (
 * Copyright 2016 Jer Brand / Irresponsible Art
 * Licensed GPL (https://github.com/aut0poietic/ali/blob/master/LICENSE)
 * --------------------------------------------------------------------------
 */
window.ali={EVENT:{ready:"ali:ready",complete:"ali:complete"},STATUS:{complete:"complete",correct:"correct",incorrect:"incorrect",unanticipated:"unanticipated",incomplete:"incomplete"},TYPE:{choice:"choice",performance:"performance",sequencing:"sequencing",numeric:"numeric",shortAnswer:"fill-in",longAnswer:"long-fill-in",other:"other"},Interaction:null,transitionEnd:"bsTransitionEnd aliTransitionEnd"},jQuery(function(a){"use strict";window.ali_AutolInit!==!1&&(a('[data-ali="card"]').card(),a('[data-ali="accordion"]').accordion(),a('[data-ali="tab-control"]').tabcontrol(),a('[data-ali="answer-set"]').answerset(),a('[data-ali="multiple-choice"]').multiplechoice(),a('[data-ali="ordered-items"]').ordereditems(),a('[data-ali="thinking-question"]').thinkingquestion(),a('[data-ali="card-carousel"]').cardcarousel())}),/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
function(a,b){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;j>i;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;k>j;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);return!e||p(e)&&0===e.length?this.renderTokens(a[4],b,c,d):void 0},n.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.2.1",a.tags=["{{","}}"];var y=new n;a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n}),function(a){"use strict";function b(){var a=document.createElement("someelement"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}"undefined"===a.type(a.support.transition)&&(a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("aliTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.aliTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})}))}(jQuery),function(a){"use strict";function b(a){return a=(""+a).toLowerCase().trim(),"role"!==a&&"tabindex"!==a?"aria-"+a:a}function c(a){return d.indexOf(a)>-1}var d=["role","tabindex","activedescendant","atomic","autocomplete","busy","checked","controls","describedby","disabled","dropeffect","expanded","flowto","grabbed","haspopup","hidden","invalid","label","labelledby","level","live","multiline","multiselectable","orientation","owns","posinset","pressed","readonly","relevant","required","selected","setsize","sort","valuemax","valuemin","valuenow","valuetext"];a.fn.aria=function(d,e){if("object"===a.type(d))for(var f in d)d.hasOwnProperty(f)&&this.aria(f,d[f]);else if(void 0!==d&&void 0!==e)this.each(function(){if(c(d)){var f=a(this),g=b(d);f.attr(g,e),"disabled"===d&&f.attr("disabled",e)}});else if(void 0!==d)return this.attr(b(d));return this}}(jQuery);var htmlTemplates={};htmlTemplates.feedback='<div class="feedback" aria-labelledby="feedback-{{count}}" tabindex="-1">\n	<div class="feedback-inner">{{{content}}}</div>\n</div>',htmlTemplates.feedbackContainer='<div role="status" aria-live="assertive" aria-atomic="true"></div>',htmlTemplates.dialog='<div class="dialog" role="alertdialog" tabindex="0" aria-label="{{label}}" aria-describedby="dialog-window">\n	<div id="dialog-window" class="dialog-window" role="document" >\n		<div class="dialog-window-inner">{{{content}}}</div>\n		<div class="dialog-window-actions">\n			<button type="button" class="dialog-window-actions-close">OK</button>\n		</div>\n	</div>\n</div>',function(a){"use strict";var b=window.htmlTemplates;Mustache.parse(b.feedback),Mustache.parse(b.feedbackContainer);var c=".feedback-content";window.ali.Feedback={_count:0,initInteraction:function(a){a.length>0&&a.append(b.feedbackContainer)},getFeedbackElements:function(b){return a(c,b)},hasFeedback:function(a){return this.getFeedbackElements(a).length>0},getFeedbackContent:function(b,c){var d=this.getFeedbackElements(b);if(void 0===c||1===d.length)return a(d[0]);for(var e=0;e<d.length;e++){var f=a(d.get(e));if(f.is("."+c))return f}},showFeedback:function(a,b){if(this.hasFeedback(a)){var c=this.getFeedbackContent(a,b);if(c.length>0)return this.show(c,a),!0}return!1},show:function(c,d){for(var e=a(Mustache.render(b.feedback,{count:++this._count,content:c.html()})),f=c[0].classList,g=0;g<f.length;g++)f.item(g).indexOf("feedback")<0&&e.addClass(f.item(g));a('[role="status"]',d).append(e),this.scrollToAndFocus(e)},scrollToAndFocus:function(b){a("html,body").animate({scrollTop:b.offset().top},{duration:1e3,easing:"",complete:function(){b.trigger("focus")}})}}}(jQuery),function(a){"use strict";var b=window.ali;if("object"===a.type(b)){var c="data-ali-notice-";b.Interaction=function(c,d,e){var f=new Date;this.$el=a(c),"string"===a.type(d)&&(this.data.type=d),"string"===a.type(e)&&(this.data.description=e),b.Feedback.hasFeedback(this.$el)&&b.Feedback.initInteraction(this.$el),this.data.start=f.getTime()},b.Interaction.prototype.data={id:"",start:0,type:b.TYPE.other,correct_responses:[],learner_response:[],result:b.STATUS.incomplete,latency:0,description:"Ali Interaction"},b.Interaction.prototype.__last=0,b.Interaction.prototype.$dialog=void 0,b.Interaction.prototype.truthy=function(a){return a===!0||"true"===a||"t"===a},b.Interaction.prototype.defer=function(a){var b=function(){a.apply(this)};requestAnimationFrame(b.bind(this))},b.Interaction.prototype.setLearnerResponses=function(b){"array"===a.type(b)&&(this.data.learner_response=b)},b.Interaction.prototype.setCorrectResponses=function(b){"array"===a.type(b)&&(this.data.correct_responses=b)},b.Interaction.prototype.complete=function(b){var c,d=new Date;"undefined"!==a.type(b)&&""!==b.trim()||(b="complete"),this.data.id=this.$el.attr("id"),this.data.result=b,this.data.latency=d.getTime()-this.data.start,this.doFeedback(b),c=new jQuery.Event("ali:complete"),this.$el.trigger(c,[this.data])},b.Interaction.prototype.doFeedback=function(a){b.Dialog.showDialog(this.$el,a)||b.Feedback.showFeedback(this.$el,a)||this.showNotice(a)},b.Interaction.prototype.itemSelected=function(a){var b=jQuery.extend(!0,{},this.data);b.id=a.attr("id");var c=new jQuery.Event("ali:itemSelected");this.$el.trigger(c,[b,a])},b.Interaction.prototype.itemComplete=function(c,d){"undefined"!==a.type(c)&&""!==c.trim()||(c=b.STATUS.complete),"undefined"!==a.type(d)&&0!==d.length||(d=this.$el);var e=jQuery.extend(!0,{},this.data);e.id=d.attr("id");var f=new Date,g=new jQuery.Event("ali:itemComplete");e.result=c,e.latency=f.getTime()-this.__last,this.__last=f.getTime(),this.$el.trigger(g,[e,d])},b.Interaction.prototype.showNotice=function(b){var d=c+b,e=this.$el.attr(d);if(void 0!==e&&""!==e.trim()){var f=a("<div>").addClass("notice-container").aria({live:"assertive"}).appendTo(this.$el),g="notice "+b,h=a("<div>").aria("hidden","true").addClass(g).html(e);f.append(h),setTimeout(function(){h.aria("hidden","false")},100)}}}}(jQuery),function(a){"use strict";var b=".dialog-content",c=window.htmlTemplates;window.ali.Dialog={_instance:void 0,getDialogElements:function(c){return a(b,c)},hasDialog:function(a){return this.getDialogElements(a).length>0},getDialogContent:function(b,c){var d=this.getDialogElements(b);if(void 0===c||1===d.length)return a(d[0]);for(var e=0;e<d.length;e++){var f=a(d.get(e));if(f.is(c))return f}},showDialog:function(a,b){if(this.hasDialog(a)){var c=this.getDialogContent(a,"."+b);if(c.length>0)return this.show(c),!0}return!1},show:function(b,d){"undefined"===a.type(c.dialog)&&Mustache.parse(c.dialog),this._instance=a(Mustache.render(c.dialog,{label:d,content:b.html()}));for(var e=b[0].classList,f=0;f<e.length;f++)e.item(f).indexOf("dialog")<0&&this._instance.addClass(e.item(f));a("body").append(this._instance).addClass("dialog-open"),a(document).off("focusin.ali").on("focusin.ali",this._handleFocus.bind(this)),a(".dialog-window-actions-close",this._instance).off("click.ali").on("click.ali",this.hide.bind(this)),this._instance.trigger("focus")},hide:function(b){"object"===a.type(b)&&(b.preventDefault(),b.stopPropagation()),"undefined"!==a.type(this._instance)&&(a(".dialog-window-actions-close",this._instance).off("click.ali"),this._instance.remove(),this._instance=void 0),a(document).off("focusin.ali"),a("body").removeClass("dialog-open")},_handleFocus:function(a){document===a.target||this._instance[0]===a.target||this._instance.has(a.target).length||this._instance.trigger("focus")}}}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("ali.card"),f=a.extend({},d.data(),"object"==typeof b&&b);e||d.data("ali.card",e=new c.Card(this)),"string"===a.type(b)&&(b=b.toLowerCase()),f.showFront||"showfront"===b?e.showFront():f.showBack||"showback"===b?e.showBack():(f.evaluate||"evaluate"===b)&&e.evaluate()})}var c=window.ali;if("object"===a.type(c)){var d="A card-based multiple choice interaction.",e=c.TYPE.choice;c.Card=function(b){this.$el=a(b),a(".card-front select",this.$el).length>0&&c.Interaction.call(this,b,e,d),this.$el.aria("tabindex","-1"),a(".show-back",this.$el).aria("controls",this.$el.attr("id")).off("click.ali").on("click.ali",this.showBack.bind(this)),a(".show-front",this.$el).aria("controls",this.$el.attr("id")).off("click.ali").on("click.ali",this.showFront.bind(this)),a(".evaluate-card",this.$el).aria("controls",this.$el.attr("id")).off("click.ali").on("click.ali",this.evaluate.bind(this)),a(".card-back",this.$el).aria("hidden","true"),a(".card-front",this.$el).aria("hidden","false")},c.Card.prototype=Object.create(c.Interaction.prototype),c.Card.prototype.constructor=c.Card,c.Card.prototype.showBack=function(b){b&&(b.preventDefault(),b.stopPropagation()),a(".card-front",this.$el).aria("hidden","true"),a(".card-back",this.$el).aria("hidden","false"),this.$el.focus()},c.Card.prototype.showFront=function(b){b&&(b.preventDefault(),b.stopPropagation()),a(".card-back",this.$el).aria("hidden","true"),a(".card-front",this.$el).aria("hidden","false"),this.$el.focus()},c.Card.prototype.evaluate=function(b){b&&(b.preventDefault(),b.stopPropagation());var d=a(".card-front select",this.$el),e=parseInt(d[0].selectedIndex,10),f=parseInt(d.attr("data-ali-correct"),10)-1,g=e==f;this.$el.removeClass("correct incorrect").addClass(g?"correct":"incorrect"),this.setCorrectResponses([d.val()]),this.setLearnerResponses([a("option:selected",d).val()]),this.complete(g?c.STATUS.correct:c.STATUS.incorrect),this.showBack()};var f=a.fn.card;a.fn.card=b,a.fn.card.Constructor=c.Card,a.fn.card.noConflict=function(){return a.fn.card=f,this}}}(jQuery),function(a){"use strict";function b(){return this.each(function(){new c.Accordion(this)})}var c=window.ali;if("object"===a.type(c)){var d="Accordion interaction.",e=c.TYPE.other,f=".accordion-tab",g='.accordion-tab[aria-expanded="true"]',h=".accordion-panel";c.Accordion=function(a){c.Interaction.call(this,a,e,d),this.init()},c.Accordion.prototype=Object.create(c.Interaction.prototype),c.Accordion.prototype.constructor=c.Accordion,c.Accordion.prototype.$tabs=void 0,c.Accordion.prototype.init=function(){var b=a(g);this.$tabs=a(f,this.$el),this.$tabs.each(this.initTab.bind(this)),b.length>0?this.defer(function(){this.show(a(b[0]))}.bind(this)):this.getFirstTab().aria("tabindex",0),a(window).on("resize",this._requestResize.bind(this))},c.Accordion.prototype.initTab=function(b,c){var d,e,f;d=a(c),f="accordion-"+b,e=d.next(h),d.aria({role:"tab",tabindex:"0",expanded:"false",controls:f}).off("click.ali").on("click.ali",this.tab_onClick.bind(this)).off("keydown.ali").on("keydown.ali",this.tab_onKeyDown.bind(this)),e.aria({role:"tabpanel",tabindex:"-1",hidden:"true"}).attr({id:f,"data-height":this._getMeasuredHeight(e)}).off("keydown.ali").on("keydown.ali",this.panel_onKeyDown.bind(this))},c.Accordion.prototype.hide=function(a){this.getPanelFromTab(a).aria({hidden:"true",tabindex:"-1"}).removeAttr("style"),a.aria("expanded","false")},c.Accordion.prototype.hideAll=function(){this.$tabs.each(function(b,c){this.hide(a(c))}.bind(this))},c.Accordion.prototype.show=function(b){var d=this.getPanelFromTab(b),e=parseInt(d.attr("data-height"));this.hideAll(),d.aria({hidden:"false",tabindex:"0"}),e>0&&d.css("max-height",e+"px"),b.aria({expanded:"true",tabindex:"0"}).addClass("viewed").focus(),this.itemSelected(b),a(".viewed",this.$el).length===this.$tabs.length&&this.data.result===c.STATUS.incomplete&&this.complete()},c.Accordion.prototype.doFeedback=function(){},c.Accordion.prototype.getPanelFromTab=function(b){return a("#"+b.aria("controls"))},c.Accordion.prototype.getTabFromPanel=function(b){return a(f+'[aria-controls="'+b.attr("id")+'"]')},c.Accordion.prototype._nextTab=function(a){for(var b=a.next(),c=2*this.$tabs.length;b.length>0&&!b.is(f)&&0!==c--;)b=b.next();return b},c.Accordion.prototype.getNextTab=function(a){var b=this._nextTab(a);return 0===b.length?this.getFirstTab():b},c.Accordion.prototype._previousTab=function(a){for(var b=a.prev(),c=2*this.$tabs.length;b.length>0&&!b.is(f)&&0!==c--;)b=b.prev();return b},c.Accordion.prototype.getPreviousTab=function(a){var b=this._previousTab(a);return 0===b.length?this.getLastTab():b},c.Accordion.prototype.getFirstTab=function(){return this.$tabs.first()},c.Accordion.prototype.getLastTab=function(){return this.$tabs.last()},c.Accordion.prototype.tab_onKeyDown=function(b){switch(b.which){case 13:case 32:b.preventDefault(),b.stopPropagation(),this.tab_onClick(b);break;case 37:case 38:b.preventDefault(),b.stopPropagation(),this.show(this.getPreviousTab(a(b.currentTarget)));break;case 39:case 40:b.preventDefault(),b.stopPropagation(),this.show(this.getNextTab(a(b.currentTarget)));break;case 35:b.preventDefault(),b.stopPropagation(),this.show(this.getLastTab());break;case 36:b.preventDefault(),b.stopPropagation(),this.show(this.getFirstTab())}},c.Accordion.prototype.tab_onClick=function(b){var c=a(b.target);"true"!==c.aria("expanded")?this.show(c):this.hide(c)},c.Accordion.prototype.panel_onKeyDown=function(b){if((b.ctrlKey||b.metaKey)&&b.currentTarget){var c,d=a(b.currentTarget);switch(b.which){case 38:b.preventDefault(),b.stopPropagation(),this.getTabFromPanel(d).focus();break;case 33:b.preventDefault(),b.stopPropagation(),c=this.getFirstTab(),"false"===c.aria("expanded")&&this.show(c),c.focus();break;case 40:b.preventDefault(),b.stopPropagation(),c=this.getLastTab(),"false"===c.aria("expanded")&&this.show(c),c.focus()}}},c.Accordion.prototype.onResize=function(a){this._requestResize()},c.Accordion.prototype._requestResize=function(){this._resizing||(requestAnimationFrame(this._resizePanels.bind(this)),this._resizing=!0)},c.Accordion.prototype._resizePanels=function(){this.$tabs.each(function(b,c){var d=a(c).next(h);d.attr("data-height",this._getMeasuredHeight(d)),"false"===d.aria("hidden")&&d.css("min-height",this._getMeasuredHeight(d)+"px")}.bind(this)),this._resizing=!1},c.Accordion.prototype._getMeasuredHeight=function(b){var c=a('<div id="ali-temp" aria-hidden="true" style="overflow:hidden;height:1px;width:100%;visibility: hidden"></div>').appendTo(this.$el),d=a('<dd class="accordion-panel"></dd>').html(b.html()).appendTo(c),e=d.height();return c.remove(),e};var i=a.fn.accordion;a.fn.accordion=b,a.fn.accordion.Constructor=c.Accordion,a.fn.accordion.noConflict=function(){return a.fn.accordion=i,this}}}(jQuery),function(a){"use strict";function b(){return this.each(function(){new c.TabControl(this)})}var c=window.ali;if("object"===a.type(c)){var d="Tab Control interaction.",e=c.TYPE.other,f=".tab-control-tablist",g=f+" li",h=g+'[aria-selected="true"]',i=".tab-control-panel";c.TabControl=function(a){c.Interaction.call(this,a,e,d),this.init()},c.TabControl.prototype=Object.create(c.Interaction.prototype),c.TabControl.prototype.constructor=c.TabControl,c.TabControl.prototype.$tabs=void 0,c.TabControl.prototype.$vi=void 0,c.TabControl.prototype.__activeTab=void 0,c.TabControl.prototype.init=function(){var b=a(f,this.$el);this.$tabs=a(g,this.$el);var c=a(h,this.$el),d=a(i,this.$el),e=this.$el.attr("id");d.each(function(b,c){var d=a(c);d.attr("id",e+"-panel-"+b).aria({role:"tabpanel",hidden:"true",tabindex:"-1",labeledby:e+"-tab-"+b}).off("keydown.ali").on("keydown.ali",this.panel_onKeyDown.bind(this))}.bind(this)),b.aria({role:"tablist",hidden:"true"}),this.$tabs.each(function(b,c){var d=a(c);d.attr("id",e+"-tab-"+b).aria({role:"tab",controls:e+"-panel-"+b,tabindex:"-1",selected:"false"}).off("click.ali").on("click.ali",this.tab_onClick.bind(this)).off("keydown.ali").on("keydown.ali",this.tab_onKeyDown.bind(this))}.bind(this)),this.$vi=a('<span class="vi" role="presentation"></span>'),b.append(this.$vi),c=a(c.length>0?c[0]:this.$tabs[0]),a(window).on("resize",this._requestResize.bind(this)),this.defer(function(){b.aria("hidden","false"),this.show(c)}.bind(this))},c.TabControl.prototype.hide=function(a){this.getPanelFromTab(a).aria({hidden:"true",tabindex:"-1"}),a.aria({selected:"false",tabindex:"-1"})},c.TabControl.prototype.hideAll=function(){this.$tabs.each(function(b,c){this.hide(a(c))}.bind(this))},c.TabControl.prototype.show=function(b){var d=this.getPanelFromTab(b);this.hideAll(),d.aria({hidden:"false",tabindex:"0"}),b.aria({selected:"true",tabindex:"0"}).addClass("viewed").focus(),this.itemSelected(b),this.updateVI(b),a(".viewed",this.$el).length===this.$tabs.length&&this.data.result===c.STATUS.incomplete&&this.complete()},c.TabControl.prototype.doFeedback=function(){},c.TabControl.prototype.getPanelFromTab=function(b){return a("#"+b.aria("controls"))},c.TabControl.prototype.getTabFromPanel=function(b){return a(g+'[aria-controls="'+b.attr("id")+'"]')},c.TabControl.prototype._nextTab=function(a){for(var b=a.next(),c=2*this.$tabs.length;b.length>0&&!b.is(g)&&0!==c--;)b=b.next();return b},c.TabControl.prototype.getNextTab=function(a){var b=this._nextTab(a);return 0===b.length?this.getFirstTab():b},c.TabControl.prototype._previousTab=function(a){for(var b=a.prev(),c=2*this.$tabs.length;b.length>0&&!b.is(g)&&0!==c--;)b=b.prev();return b},c.TabControl.prototype.getPreviousTab=function(a){var b=this._previousTab(a);return 0===b.length?this.getLastTab():b},c.TabControl.prototype.getFirstTab=function(){return this.$tabs.first()},c.TabControl.prototype.getLastTab=function(){return this.$tabs.last()},c.TabControl.prototype.panel_onKeyDown=function(b){if((b.ctrlKey||b.metaKey)&&b.currentTarget){var c,d=a(b.currentTarget);switch(b.which){case 38:b.preventDefault(),b.stopPropagation(),this.getTabFromPanel(d).focus();break;case 33:b.preventDefault(),b.stopPropagation(),c=this.getFirstTab(),"false"===c.aria("expanded")&&this.show(c),c.focus();break;case 40:b.preventDefault(),b.stopPropagation(),c=this.getLastTab(),"false"===c.aria("expanded")&&this.show(c),c.focus()}}},c.TabControl.prototype.tab_onClick=function(b){var c=a(b.target);"true"!==c.aria("selected")&&(this.hideAll(),this.show(c))},c.TabControl.prototype.tab_onKeyDown=function(b){switch(b.which){case 13:case 32:b.preventDefault(),b.stopPropagation(),this.tab_onClick(b);break;case 37:case 38:b.preventDefault(),b.stopPropagation(),this.show(this.getPreviousTab(a(b.currentTarget)));break;case 39:case 40:b.preventDefault(),b.stopPropagation(),this.show(this.getNextTab(a(b.currentTarget)));break;case 35:b.preventDefault(),b.stopPropagation(),this.show(this.getLastTab());break;case 36:b.preventDefault(),b.stopPropagation(),this.show(this.getFirstTab())}},c.TabControl.prototype.onResize=function(a){this._requestResize()},c.TabControl.prototype._requestResize=function(){this._resizing||(this._resizing=!0,this.__activeTab=a(h,this.$el),requestAnimationFrame(this.updateVI.bind(this)))},c.TabControl.prototype.updateVI=function(b){"number"===a.type(b)&&(this._resizing=!1,b=this.__activeTab);var c=b.position(),d=b.outerWidth();this.$vi.css({width:d+"px",left:c.left+"px"})};var j=a.fn.tabcontrol;a.fn.tabcontrol=b,a.fn.tabcontrol.Constructor=c.TabControl,a.fn.tabcontrol.noConflict=function(){return a.fn.tabcontrol=j,this}}}(jQuery),function(a){"use strict";function b(){return this.each(function(){new c.AnswerSet(this)})}var c=window.ali;if("object"===a.type(c)){var d="Answer Set multi-part interaction.",e=c.TYPE.choice,f="form",g="select",h="button",i="data-ali-correct",j="data-ali-correct-message",k="data-ali-incorrect-message";c.AnswerSet=function(a){c.Interaction.call(this,a,e,d),this.init()},c.AnswerSet.prototype=Object.create(c.Interaction.prototype),c.AnswerSet.prototype.constructor=c.AnswerSet,c.AnswerSet.prototype.init=function(){a(f,this.$el).each(function(b,c){a(c).attr("id",this.$el.attr("id")+"-"+b).off("submit.ali").on("submit.ali",this.question_onSubmit.bind(this))}.bind(this)),a(f+" "+g,this.$el).off("change.ali").on("change.ali",function(b){var c=a(a(b.target).parents(f)[0]);this.itemSelected(c)}.bind(this))},c.AnswerSet.prototype.question_onSubmit=function(b){b.preventDefault(),b.stopPropagation();var d=a(b.target),e=parseInt(a(g,d).prop("selectedIndex"))===parseInt(d.attr(i),10);this.showFlag(d,e),this.disableQuestion(d),this.setCorrectResponses([a(g+" option",d).eq(parseInt(d.attr(i),10)).val()]),this.setLearnerResponses([a(g,d).val()]),this.itemComplete(e?c.STATUS.correct:c.STATUS.incorrect,d),this.allQuestionsComplete()},c.AnswerSet.prototype.allQuestionsComplete=function(){var b,d=a(f).length;d===a(f+'[aria-disabled="true"]').length&&(b=d===a(f+" .correct").length,this.complete(b?c.STATUS.correct:c.STATUS.incorrect))},c.AnswerSet.prototype.disableQuestion=function(b){b.aria("disabled","true"),a(g+","+h,b).aria("disabled","true")},c.AnswerSet.prototype.showFlag=function(a,b){a.aria({live:"assertive",atomic:"true"});var c=this.makeFlag(b?a.attr(j):a.attr(k),b?"correct":"incorrect");c.aria("hidden","true").appendTo(a),setTimeout(function(){c.aria("hidden","false")}.bind(this),1)},c.AnswerSet.prototype.makeFlag=function(b,c){return a('<div class="flag '+c+'"><span>'+b+"</span></div>")};var l=a.fn.answerset;a.fn.answerset=b,a.fn.answerset.Constructor=c.AnswerSet,a.fn.answerset.noConflict=function(){return a.fn.answerset=l,this}}}(jQuery),function(a){"use strict";function b(){return this.each(function(){new c.MultipleChoice(this)})}var c=window.ali;if("object"===a.type(c)){var d="A multiple choice interaction.",e=c.TYPE.choice;c.MultipleChoice=function(a){c.Interaction.call(this,a,e,d),this.init()},c.MultipleChoice.prototype=Object.create(c.Interaction.prototype),c.MultipleChoice.prototype.constructor=c.MultipleChoice,c.MultipleChoice.prototype.init=function(){this.$el.off("submit.ali").on("submit.ali",this.form_onSubmit.bind(this)),a(".input-group input",this.$el).off("change.ali").on("change.ali",this.input_onChange.bind(this))},c.MultipleChoice.prototype.input_onChange=function(b){this.itemSelected(a(b.target))},c.MultipleChoice.prototype.form_onSubmit=function(b){b.preventDefault(),b.stopPropagation();for(var d=!0,e=a("input",this.$el),f=0;f<e.length;f++){var g=a(e[f]);if(this.truthy(g.attr("data-correct"))!==this.truthy(g.is(":checked"))){d=!1;break}}this.setResultData(),this.complete(d?c.STATUS.correct:c.STATUS.incorrect),this.disableInteraction()},c.MultipleChoice.prototype.disableInteraction=function(){a("input",this.$el).off("change.ali").aria("disabled","true"),a("button",this.$el).aria("disabled","true"),this.$el.off("submit.ali").aria("disabled","true")},c.MultipleChoice.prototype.setResultData=function(){var b=[],c=[];a('input[data-correct="true"]',this.$el).each(function(c,d){b.push(this.getResponseValue(a(d)))}.bind(this)),a("input:checked",this.$el).each(function(b,d){c.push(this.getResponseValue(a(d)))}.bind(this)),this.setCorrectResponses(b),this.setLearnerResponses(c)},c.MultipleChoice.prototype.getResponseValue=function(b){var c=b.attr("id");return a('label[for="'+c+'"]').text()};var f=a.fn.answerset;a.fn.multiplechoice=b,a.fn.multiplechoice.Constructor=c.MultipleChoice,a.fn.multiplechoice.noConflict=function(){return a.fn.multiplechoice=f,this}}}(jQuery),function(a){"use strict";function b(){return this.each(function(){new c.OrderedItems(this)})}var c=window.ali;if("object"===a.type(c)){var d="Sequenced elements interaction.",e=c.TYPE.sequencing,f=400;c.OrderedItems=function(a){c.Interaction.call(this,a,e,d),this.init()},c.OrderedItems.prototype=Object.create(c.Interaction.prototype),c.OrderedItems.prototype.constructor=c.OrderedItems,c.OrderedItems.prototype.$items=void 0,c.OrderedItems.prototype.$selects=void 0,c.OrderedItems.prototype._resizing=!1,c.OrderedItems.prototype.$currentItem=void 0,c.OrderedItems.prototype.init=function(){this.$items=a(".list-elements li",this.$el),this.createElements(),this.$selects=a("select",this.el),this.$el.off("submit.ali").on("submit.ali",this.form_onSubmit.bind(this)),a(window).on("resize",this.window_onResize.bind(this)),this.updateHeight(),this.updateClasses()},c.OrderedItems.prototype.createElements=function(){for(var b=this.$items.length,c=a("<select></select>"),d=1;b>=d;d++)c.append("<option>"+d+"</option>");this.$items.each(function(b,d){var e=a(d),f=this.$el.attr("id")+"-item-"+b,g=c.clone();g.attr("id",f),g[0].selectedIndex=b;var h=a('<span class="item-select"></span>').append(g);e.append(h).prepend("<i>"+(b+1)+"</i>"),a("label",e).attr("for",f)}.bind(this))},c.OrderedItems.prototype.window_onResize=function(){this._resizing||(this._resizing=!0,window.requestAnimationFrame(this.updateHeight.bind(this)))},c.OrderedItems.prototype.updateHeight=function(){var b=0;this.$items.each(function(c,d){b=Math.max(b,a("label",d).outerHeight())}),this.$items.height(b);var c=a(this.$items[0]).outerHeight();a(".list-elements",this.$el).height(c*this.$items.length*1.24),this._resizing=!1},c.OrderedItems.prototype.addSelectEvents=function(){this.$selects.off("change.ali").on("change.ali",this.select_onChange.bind(this)).off("focus.ali").on("focus.ali",this.select_onFocus.bind(this))},c.OrderedItems.prototype.removeSelectEvents=function(){this.$selects.off("change.ali").off("focus.ali")},c.OrderedItems.prototype.select_onFocus=function(b){a(b.target).attr("data-prev-value",b.target.selectedIndex)},c.OrderedItems.prototype.select_onChange=function(b){this.removeSelectEvents(),this.$currentItem=a(b.target),a(this.$currentItem.parents("li")).addClass("moving").one(c.transitionEnd,function(b){a(b.target).removeClass("moving")}).emulateTransitionEnd(f),this.itemSelected(this.$currentItem),window.requestAnimationFrame(this.reorderValues.bind(this))},c.OrderedItems.prototype.form_onSubmit=function(b){b.preventDefault(),b.stopPropagation();var d=!0,e=[],f=[];this.$items.each(function(){var b=a(this),c=a("select",b),g=parseInt(b.attr("data-correct"),10),h=parseInt(c[0].selectedIndex+1),i=a("label",b).text();e[h]=i,f[g]=i,g!==h&&(d=!1)}),this.setCorrectResponses(f),this.setLearnerResponses(e),this.$el.off("submit.ali").on("submit.ali",function(a){a.preventDefault(),a.stopPropagation()}),a("button").aria("disabled","true"),this.complete(d?c.STATUS.correct:c.STATUS.incorrect)},c.OrderedItems.prototype.reorderValues=function(){var b=this.$currentItem[0].selectedIndex,c=this.previousValue(this.$currentItem);this.$selects.each(function(b,d){var e=a(d);if(!e.is(this.$currentItem)){var f=e[0].selectedIndex;f>=c&&(e[0].selectedIndex=f-1)}}.bind(this)),this.$selects.each(function(c,d){var e=a(d);if(!e.is(this.$currentItem)){var f=e[0].selectedIndex;f>=b&&(e[0].selectedIndex=f+1)}}.bind(this)),window.requestAnimationFrame(this.updateClasses.bind(this))},c.OrderedItems.prototype.updateClasses=function(){this.$items.each(function(b,c){var d=a(c),e=a("select",d);d.removeClass(function(a,b){return(b.match(/(^|\s)item-\S+/g)||[]).join(" ")}).addClass("item-"+e.val()),a("i",d).text(e.val())}),this.addSelectEvents(),this.$currentItem&&this.$currentItem.length>0&&this.$currentItem.trigger("focus")},c.OrderedItems.prototype.previousValue=function(a){
return parseInt(a.attr("data-prev-value"),10)};var g=a.fn.ordereditems;a.fn.ordereditems=b,a.fn.ordereditems.Constructor=c.OrderedItems,a.fn.ordereditems.noConflict=function(){return a.fn.ordereditems=g,this}}}(jQuery),function(a){"use strict";function b(){return this.each(function(){new c.ThinkingQuestion(this)})}var c=window.ali;if("object"===a.type(c)){var d="Long-form text answer",e=c.TYPE.longAnswer;c.ThinkingQuestion=function(a){c.Interaction.call(this,a,e,d),this.init()},c.ThinkingQuestion.prototype=Object.create(c.Interaction.prototype),c.ThinkingQuestion.prototype.constructor=c.ThinkingQuestion,c.ThinkingQuestion.prototype.init=function(){this.$el.off("submit.ali").on("submit.ali",this.form_onSubmit.bind(this));var b="";try{b=localStorage.getItem(this.$el.attr("id"))}catch(c){b=""}var d=this.$el.attr("id")+"-textarea";a("textarea",this.$el).val(b).aria("labeledby",d),a("question",this.$el).attr("id",d)},c.ThinkingQuestion.prototype.form_onSubmit=function(b){b.preventDefault(),b.stopPropagation();var d=a("textarea",this.$el).val();if(d.length>0){a("button, textarea",this.$el).aria("disabled","true"),this.setLearnerResponses([d]),this.complete(c.STATUS.complete);try{window.localStorage.setItem(this.$el.attr("id"),d)}catch(e){return!1}}};var f=a.fn.answerset;a.fn.thinkingquestion=b,a.fn.thinkingquestion.Constructor=c.ThinkingQuestion,a.fn.thinkingquestion.noConflict=function(){return a.fn.thinkingquestion=f,this}}}(jQuery),function(a){"use strict";function b(){return this.each(function(){new c.CardCarousel(this)})}var c=window.ali;if("object"===a.type(c)){var d="A collection of question/scenario - result sets.",e=c.TYPE.other;c.CardCarousel=function(b){c.Interaction.call(this,b,e,d),this.$el=a(b),this.init()},c.CardCarousel.prototype=Object.create(c.Interaction.prototype),c.CardCarousel.prototype.constructor=c.CardCarousel,c.CardCarousel.prototype.activeElement=0,c.CardCarousel.prototype.init=function(){0===a(".card:first",this.$el).parents(".card-wrapper").length&&a(".card",this.$el).wrap('<div class="card-wrapper"></div>');var b=Math.max.apply(null,a(".card",this.$el).map(function(){return a(this).outerHeight(!0)}).get());this.$el.height(b),this.updateClasses(),a(".show-next",this.$el).off("click.ali").on("click.ali",this.onShowNext.bind(this)),a(".show-first",this.$el).off("click.ali").on("click.ali",this.onShowFirst.bind(this))},c.CardCarousel.prototype.onShowNext=function(b){b.preventDefault(),b.stopPropagation(),this.activeElement++,this.updateClasses(),this.activeElement===a(".card",this.$el).length-1&&this.complete(c.STATUS.complete),setTimeout(this.focusNextCard.bind(this),600)},c.CardCarousel.prototype.focusNextCard=function(){a('.card-wrapper[aria-hidden="false"] .card',this.$el).focus()},c.CardCarousel.prototype.onShowFirst=function(b){b.preventDefault(),b.stopPropagation(),this.activeElement=0,this.updateClasses(),a(".card",this.$el).card("showFront"),setTimeout(function(){a(".card:first",this.$el).focus()}.bind(this),300)},c.CardCarousel.prototype.updateClasses=function(){var b;a(".card-wrapper",this.$el).each(function(c,d){b="card-wrapper ",c!==this.activeElement&&(c<this.activeElement?(b+="before ",c===this.activeElement-1&&(b+="hinted ")):(b+="after ",c===this.activeElement+1&&(b+="hinted "))),a(d).attr("class",b).aria("hidden",c===this.activeElement?"false":"true")}.bind(this))};var f=a.fn.cardcarousel;a.fn.cardcarousel=b,a.fn.cardcarousel.Constructor=c.CardCarousel,a.fn.cardcarousel.noConflict=function(){return a.fn.cardcarousel=f,this}}}(jQuery);
//# sourceMappingURL=ali.min.js.map