/*!
 * --------------------------------------------------------------------------
 * Ali - Accessible Learning Interactions (
 * Copyright 2016 Jer Brand / Irresponsible Art
 * Licensed GPL (https://github.com/aut0poietic/ali/blob/master/LICENSE)
 * --------------------------------------------------------------------------
 */
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}jQuery(function(a){void 0===window.ali_ManualInit&&a('[data-ali="accordion"]').accordion()});var ARIA=function(a){function b(a){return a=(""+a).toLowerCase().trim(),"role"!==a&&"tabindex"!==a?"aria-"+a:a}function c(a){return d.indexOf(a)>-1}var d=["role","tabindex","activedescendant","atomic","autocomplete","busy","checked","controls","describedby","disabled","dropeffect","expanded","flowto","grabbed","haspopup","hidden","invalid","label","labelledby","level","live","multiline","multiselectable","orientation","owns","posinset","pressed","readonly","relevant","required","selected","setsize","sort","valuemax","valuemin","valuenow","valuetext"];a.fn.aria=function(d,e){if("object"===a.type(d))for(var f in d)this.aria(f,d[f]);else void 0!==d&&void 0!==e&&this.each(function(){if(c(d)){var f=a(this),g=b(d);f.attr(g,e)}});return this}}(jQuery),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Accordion=function(a){var b=".accordion-tab",c=".accordion-panel",d=function(){function d(e){var f=this;_classCallCheck(this,d),this.$el=a(e),this.$tabs=a(b,this.$el),this.$tabs.each(function(b,d){var e=a(d),g=f._makeID(e),h=e.next(c);e.aria({role:"tab",tabindex:0===b?"0":"-1",expanded:0===b?"true":"false",controls:g}).off("click.ali").on("click.ali",f.onTabClick.bind(f)).off("keydown.ali").on("keydown.ali",f.onTabKeyDown.bind(f)),h.aria({role:"tabpanel",tabindex:"0",hidden:0===b?"false":"true"}).attr("id",g)})}return _createClass(d,[{key:"getPanelFromTab",value:function(b){return a("#"+b.attr("aria-controls").replace(/tab/,"panel"))}},{key:"getTabFromPanel",value:function(b){return a("#"+b.attr("id").replace(/panel/,"tab"))}},{key:"hide",value:function(a){this.getPanelFromTab(a).attr("aria-hidden","true"),a.attr({"aria-expanded":"false","aria-selected":"false",tabindex:"-1"})}},{key:"hideAll",value:function(){console.log(this),this.$tabs.each(function(b,c){this.hide(a(c))}.bind(this)),this.firstRun&&a("#panel-0").attr("aria-hidden","true")}},{key:"show",value:function(a){this.hideAll(),this.getPanelFromTab(a).attr("aria-hidden","false"),a.attr({"aria-expanded":"true","aria-selected":"true",tabindex:"0"}).focus(),this.showPresentation(a.attr("data-figure"))}},{key:"getNextTab",value:function(a){var b=a.next();return 0===b.length?this.getFirstTab():b}},{key:"getPreviousTab",value:function(a){var b=a.prev();return 0===b.length?this.getLastTab():b}},{key:"getFirstTab",value:function(){return this.$tabs.first()}},{key:"getLastTab",value:function(){return this.$tabs.last()}},{key:"onTabKeyDown",value:function(a){console.log("keydown.ali")}},{key:"onTabClick",value:function(b){var c=a(b.target);"true"!==c.attr("aria-expanded")&&(this.hideAll(),this.show(c))}},{key:"_makeID",value:function(a){var b=a.text().replace(/[\W_]+/g,"").toLowerCase();return b.length>10&&(b=b.substring(0,10)),b}}],[{key:"_jQuery",value:function(){return this.each(function(){new d(this)})}}]),d}();return a.fn.accordion=d._jQuery,a.fn.accordion.Constructor=d,a.fn.accordion.noConflict=function(){return a.fn.accordion=a.fn.accordion,d._jQueryInterface},d}(jQuery);
//# sourceMappingURL=ali.min.js.map